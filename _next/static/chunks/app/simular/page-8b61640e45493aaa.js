(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[535],{5998:function(e,s,l){Promise.resolve().then(l.bind(l,7030))},7030:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return f}});var a=l(7437);l(8136);var r=l(2265),t=l(2840);function o(e){let{onChange:s,isNumber:l,groupSymbolLeft:r,groupSymbolRight:o,isPercent:n,value:c,...i}=e,m="number"===e.type||l,u=m&&c?function(e,s){let{isPercent:l}=s;return null==e||isNaN(e.toNumber())?"":l?e.times(100).toNumber():e.toNumber()}(c,{isPercent:n}):c||"",d=(0,a.jsx)("input",{className:"form-control",onChange:function(e){let{value:l}=e.target;(s||function(){})(n?(0,t.Z)(l).div(100):m?(0,t.Z)(l):l)},value:u,...i});return r||o?(0,a.jsxs)("div",{className:"input-group mb-3",children:[r&&(0,a.jsx)("span",{className:"input-group-text",children:r}),d,o&&(0,a.jsx)("span",{className:"input-group-text",children:o})]}):d}var n=l(7907),c=l(3210);let i=(0,r.createContext)({setTitulo:()=>{},setArea:()=>{},setValor:()=>{},setItbi:()=>{},setEscrituraERegistro:()=>{},setIptu:()=>{},setValorTotal:()=>{},setValorEntrada:()=>{},setTaxaDeJuros:()=>{},setMesDeInicio:()=>{},setPrazo:()=>{},setAreaConstruidaTotal:()=>{},setAreaConstruidaEquivalente:()=>{},setCustoCUB:()=>{},setCustoHistoricoInterno:()=>{},setCustoOrcado:()=>{},setCustoProjetos:()=>{},setCustoTerraplanagem:()=>{},setCustoPaisagismo:()=>{},setOutrosCustos:()=>{},setMesDeInicioObra:()=>{},setDuracaoObra:()=>{},saveAll:()=>{}});function m(e){let s=(0,n.useSearchParams)(),l=(0,n.useRouter)(),[o,m]=(0,r.useState)(),[u,d]=(0,r.useState)(),[h,b]=(0,r.useState)(),[x,j]=(0,r.useState)(),[v,N]=(0,r.useState)(),[p,f]=(0,r.useState)(),[g,C]=(0,r.useState)(),[y,S]=(0,r.useState)(),[R,E]=(0,r.useState)(),[O,T]=(0,r.useState)(),[D,I]=(0,r.useState)(),[w,A]=(0,r.useState)(),[B,Z]=(0,r.useState)(),[$,_]=(0,r.useState)(),[M,P]=(0,r.useState)(),[V,F]=(0,r.useState)(),[L,k]=(0,r.useState)(),[H,U]=(0,r.useState)(),[z,J]=(0,r.useState)(),[q,G]=(0,r.useState)(),[K,Q]=(0,r.useState)(),{repository:W,isDbOk:X}=(0,c.y$)();async function Y(){let e=s.get("sim");if(null!=e){let s=await W.getSimulacao(e);console.log(s),m(s.titulo),d(s.area&&(0,t.Z)(s.area)),b(s.valor&&(0,t.Z)(s.valor)),j(s.itbi&&(0,t.Z)(s.itbi)),N(s.escrituraERegistro&&(0,t.Z)(s.escrituraERegistro)),f(s.iptu&&(0,t.Z)(s.iptu)),C(s.valorEntrada&&(0,t.Z)(s.valorEntrada)),S(s.taxaDeJuros&&(0,t.Z)(s.taxaDeJuros)),E(s.mesDeInicio&&(0,t.Z)(s.mesDeInicio)),T(s.prazo&&(0,t.Z)(s.prazo))}}async function ee(){console.log("start save all");let e=s.get("sim"),a={titulo:o,area:u,valor:h,itbi:x,escrituraERegistro:v,iptu:p,valorEntrada:g,taxaDeJuros:y,mesDeInicio:R,prazo:O};Object.keys(a).forEach(e=>{var s,l;(null===(s=a[e])||void 0===s?void 0:s.toNumber)!=null&&(a[e]=null===(l=a[e])||void 0===l?void 0:l.toNumber())}),a.id=e;let r=await W.save(a);console.log(r),null==e&&l.push("/simular?sim=".concat(r.id)),console.log("end save all")}return(0,r.useEffect)(()=>{X&&Y()},[X]),(0,a.jsx)(i.Provider,{value:{titulo:o,setTitulo:m,area:u,setArea:d,valor:h,setValor:b,itbi:x,setItbi:j,escrituraERegistro:v,setEscrituraERegistro:N,iptu:p,setIptu:f,valorEntrada:g,setValorEntrada:C,taxaDeJuros:y,setTaxaDeJuros:S,mesDeInicio:R,setMesDeInicio:E,prazo:O,setPrazo:T,areaConstruidaTotal:D,setAreaConstruidaTotal:I,areaConstruidaEquivalente:w,setAreaConstruidaEquivalente:A,custoCUB:B,setCustoCUB:Z,custoHistoricoInterno:$,setCustoHistoricoInterno:_,custoOrcado:M,setCustoOrcado:P,custoProjetos:V,setCustoProjetos:F,custoTerraplanagem:L,setCustoTerraplanagem:k,custoPaisagismo:H,setCustoPaisagismo:U,outrosCustos:z,setOutrosCustos:J,mesInicioObra:q,setMesDeInicioObra:G,duracaoObra:K,setDuracaoObra:Q,saveAll:ee},...e})}let u=()=>r.useContext(i);var d=l(1107);function h(e){let{onValorTotalTerrenoChange:s}=e,[l,t]=(0,r.useState)(),{area:n,setArea:c,valor:i,setValor:m,itbi:h,setItbi:b,escrituraERegistro:x,setEscrituraERegistro:j,iptu:v,setIptu:N}=u();return(0,r.useEffect)(()=>{i&&h&&x&&v&&t(d.B.valorTotal(i,h,x,v,d.B.MESES_ATE_VENDER))},[i,h,x,v]),(0,r.useEffect)(()=>{s(l)},[l]),(0,a.jsxs)("section",{className:"card valor-terreno mb-3",children:[(0,a.jsx)("div",{className:"card-header",children:"Terreno"}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"\xc1rea Do Terreno"}),(0,a.jsx)(o,{onChange:c,type:"number",groupSymbolRight:"m\xb2",value:n})]}),(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Valor De Aquisi\xe7\xe3o"}),(0,a.jsx)(o,{onChange:m,type:"number",min:"1",groupSymbolLeft:"R$",value:i}),(0,a.jsx)("div",{className:"form-text",children:d.B.extenso(i,{mode:"currency"})})]}),(0,a.jsxs)("div",{className:"mb-3 col-md-2",children:[(0,a.jsx)("label",{className:"form-label",children:"Pre\xe7o Do M\xb2"}),(0,a.jsxs)("h6",{children:["R$ ",n&&i&&i.div(n).toFormat(2)," / m\xb2"]})]})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Itbi"}),(0,a.jsx)(o,{onChange:b,type:"number",min:"1",step:"any",groupSymbolRight:"%",isPercent:!0,value:h})]}),(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Escritura E Registro"}),(0,a.jsx)(o,{onChange:j,type:"number",min:"1",step:"any",groupSymbolRight:"%",isPercent:!0,value:x})]}),(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Iptu"}),(0,a.jsx)(o,{onChange:N,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",groupSymbolRight:"ano",value:v})]})]}),(0,a.jsxs)("div",{className:"row mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"Custo Total Terreno"}),(0,a.jsxs)("h6",{children:["R$ ",null==l?void 0:l.toFormat(2)]}),(0,a.jsx)("div",{className:"form-text",children:d.B.extenso(l,{mode:"currency"})})]})]})}function b(e){let{valorTotalTerreno:s}=e,{valorEntrada:l,setValorEntrada:n,taxaDeJuros:c,setTaxaDeJuros:i,mesDeInicio:m,setMesDeInicio:h,prazo:b,setPrazo:x}=u(),[j,v]=(0,r.useState)(!1),N=s&&l?s.minus(l):null,p=b&&c&&N?function(e,s,l){var a,r;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(o||(o=0),n||(n=0),0===e)?(0,t.Z)(-(l+o)/s):(r=Math.pow(1+e,s),a=-e*(l*r+o)/(r-1),1===n&&(a/=1+e),(0,t.Z)(a))}(c.toNumber(),null==b?void 0:b.toNumber(),-(null==N?void 0:N.toNumber())):null,f=b&&p&&l?b.times(p).plus(l):null;return(0,a.jsxs)("section",{className:"card compra-terreno-parcelada mb-3 ".concat(j&&"show"),children:[(0,a.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-center",children:[(0,a.jsx)("span",{children:"Compra terreno parcelada"}),(0,a.jsx)("button",{className:"btn btn-secondary align-end",type:"button",onClick:e=>v(!j),children:j?"Remover":"Incluir"})]}),(0,a.jsxs)("div",{className:"collapse ".concat(j&&"show"),children:[(0,a.jsxs)("div",{className:"row mb-3",children:[(0,a.jsxs)("div",{className:"col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Valor Da Entrada Sinal"}),(0,a.jsx)(o,{onChange:n,type:"number",groupSymbolLeft:"R$",value:l}),(0,a.jsx)("div",{className:"form-text",children:d.B.extenso(l,{mode:"currency"})})]}),(0,a.jsxs)("div",{className:"col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Saldo"}),(0,a.jsxs)("h6",{children:["R$ ",null==N?void 0:N.toFormat(2)," / m\xb2"]})]})]}),(0,a.jsxs)("div",{className:"row mb-3",children:[(0,a.jsxs)("div",{className:"col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Taxa De Juros"}),(0,a.jsx)(o,{onChange:i,type:"number",groupSymbolRight:"A.M.",isPercent:!0,value:c})]}),(0,a.jsxs)("div",{className:"col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"M\xeas De In\xedcio"}),(0,a.jsx)(o,{onChange:h,type:"number",value:m})]}),(0,a.jsxs)("div",{className:"col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Prazo em meses"}),(0,a.jsx)(o,{onChange:x,type:"number",value:b})]})]}),(0,a.jsxs)("div",{className:"row mb-3",children:[(0,a.jsxs)("div",{className:"col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"M\xeas Da \xdaltima Parcela"}),(0,a.jsx)("h6",{children:m&&b&&m.plus(b).minus(1).toFormat(0)})]}),(0,a.jsxs)("div",{className:"col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Valor da parcela"}),(0,a.jsxs)("h6",{children:["R$ ",null==p?void 0:p.toFormat(2)]}),(0,a.jsx)("div",{className:"form-text",children:d.B.extenso(p,{mode:"currency"})})]}),(0,a.jsxs)("div",{className:"col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Valor Total Parcelado"}),(0,a.jsxs)("h6",{children:["R$ ",null==f?void 0:f.toFormat(2)]}),(0,a.jsx)("div",{className:"form-text",children:d.B.extenso(f,{mode:"currency"})})]})]})]})]})}var x=l(3930),j=l(8792),v=l(2578);function N(e){let{}=e,[s,l]=(0,r.useState)(),[t,n]=(0,r.useState)(),[c,i]=(0,r.useState)(),[m,h]=(0,r.useState)(),{areaConstruidaTotal:b,setAreaConstruidaTotal:x,areaConstruidaEquivalente:j,setAreaConstruidaEquivalente:N,custoCUB:p,setCustoCUB:f,custoHistoricoInterno:g,setCustoHistoricoInterno:C,custoOrcado:y,setCustoOrcado:S,custoProjetos:R,setCustoProjetos:E,custoTerraplanagem:O,setCustoTerraplanagem:T,custoPaisagismo:D,setCustoPaisagismo:I,outrosCustos:w,setOutrosCustos:A,mesInicioObra:B,setMesDeInicioObra:Z,duracaoObra:$,setDuracaoObra:_}=u();return(0,r.useEffect)(()=>{n(d.B.custoObra(j,p,g,y,m))},[j,p,g,y,m]),(0,r.useEffect)(()=>{i(d.B.custoTotalDeConstrucao(t,R,O,D,w))},[t,R,O,D,w]),(0,r.useEffect)(()=>{l(d.B.mesTerminoObra(B,$))},[B,$]),(0,a.jsxs)("section",{className:"card valor-terreno mb-3",children:[(0,a.jsx)("div",{className:"card-header",children:"Custos de Constru\xe7\xe3o"}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"\xc1rea Constru\xedda Total"}),(0,a.jsx)(o,{onChange:x,type:"number",groupSymbolRight:"m\xb2",value:b})]}),(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"\xc1rea Constru\xedda equivalente"}),(0,a.jsx)(o,{onChange:N,type:"number",groupSymbolRight:"m\xb2",value:j})]}),(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"CUB Refer\xeancia"}),(0,a.jsx)(o,{type:"text",value:"R1-B"})]})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Custo CUB"}),(0,a.jsx)(o,{onChange:f,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",groupSymbolRight:"m\xb2",value:p})]}),(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Custo Hist\xf3rico Interno"}),(0,a.jsx)(o,{onChange:C,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",groupSymbolRight:"m\xb2",value:g})]}),(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Custo Or\xe7ado"}),(0,a.jsx)(o,{onChange:S,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",groupSymbolRight:"m\xb2",value:y})]})]}),(0,a.jsxs)("div",{className:"row mb-3",children:[(0,a.jsxs)("div",{className:"mb-3 col-md-3",children:[(0,a.jsx)("label",{className:"form-label",children:"Custo Escolhido"}),(0,a.jsxs)("select",{className:"form-control",value:m,onChange:e=>h(e.target.value),children:[(0,a.jsx)("option",{value:v.A.CUB,children:"CUB"}),(0,a.jsx)("option",{value:v.A.HISTORICO_INTERNO,children:"Hist\xf3rico"}),(0,a.jsx)("option",{value:v.A.ORCAMENTO,children:"Or\xe7amento"})]})]}),(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Custo da obra"}),(0,a.jsxs)("h6",{children:["R$ ",null==t?void 0:t.toFormat(2)]}),(0,a.jsx)("div",{className:"form-text",children:d.B.extenso(t,{mode:"currency"})})]})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Custo Projetos"}),(0,a.jsx)(o,{onChange:E,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",value:R})]}),(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Custo Terraplanagem"}),(0,a.jsx)(o,{onChange:T,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",value:O})]}),(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Custo Paisagismo"}),(0,a.jsx)(o,{onChange:I,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",value:D})]}),(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Outros custos"}),(0,a.jsx)(o,{onChange:A,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",value:w})]})]}),(0,a.jsxs)("div",{className:"row mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"Custo total de constru\xe7\xe3o"}),(0,a.jsxs)("h6",{children:["R$ ",null==c?void 0:c.toFormat(2)]}),(0,a.jsx)("div",{className:"form-text",children:d.B.extenso(c,{mode:"currency"})})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"M\xeas In\xedcio Da Obra"}),(0,a.jsx)(o,{onChange:Z,type:"number",min:"1",groupSymbolRight:"meses",value:B})]}),(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Dura\xe7\xe3o Da Obra"}),(0,a.jsx)(o,{onChange:_,type:"number",min:"1",groupSymbolRight:"meses",value:$})]}),(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"M\xeas T\xe9rmino Da Obra"}),(0,a.jsxs)("h6",{children:[null==s?void 0:s.toFormat(0)," meses"]})]})]})]})}function p(){let[e,s]=(0,r.useState)(),{saveAll:l,titulo:t,setTitulo:n}=u();return(0,a.jsxs)("main",{className:"main container mt-3",children:[(0,a.jsx)("h1",{children:"Simular nova constru\xe7\xe3o"}),(0,a.jsxs)("article",{children:[(0,a.jsxs)("section",{className:"card valor-terreno mb-3",children:[(0,a.jsx)("div",{className:"card-header",children:"Terreno"}),(0,a.jsx)("div",{className:"mark-section",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsxs)("div",{className:"mb-3 col-md",children:[(0,a.jsx)("label",{className:"form-label",children:"Como deseja chamar sua simula\xe7\xe3o?"}),(0,a.jsx)(o,{onChange:n,type:"text",value:t,placeholder:"Casa popular 50m\xb2"})]})})})]}),(0,a.jsx)(h,{onValorTotalTerrenoChange:s}),(0,a.jsx)(b,{valorTotalTerreno:e}),(0,a.jsx)(N,{}),(0,a.jsx)(j.default,{href:"/",className:"btn btn-secondary me-2",children:"Voltar ao inicio"}),(0,a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:l,children:"Salvar simula\xe7\xe3o"})]})]})}function f(){return(0,a.jsx)(x.A,{children:(0,a.jsx)(m,{children:(0,a.jsx)(p,{})})})}},1107:function(e,s,l){"use strict";l.d(s,{B:function(){return n}});var a=l(2840),r=l(6947),t=l.n(r),o=l(2578);class n{static valorTotal(e,s,l,r,t){return e&&e&&s&&l&&r&&t?e.plus(e.times(s.plus(l))).plus(r.times(t.div(this.MESES_DO_ANO))):(0,a.Z)(0)}static custoObra(e,s,l,r,t){let n=s;return(t===o.A.HISTORICO_INTERNO?n=l:t===o.A.ORCAMENTO&&(n=r),n&&e)?n.times(e):new a.Z(0)}static custoTotalDeConstrucao(e,s,l,r,t){return(e||new a.Z(0)).plus(s||0).plus(l||0).plus(r||0).plus(t||0)}static mesTerminoObra(e,s){return new a.Z(0).plus(e||0).plus(s||0).minus(1)}static extenso(e,s){var l;return(e instanceof a.Z&&(e=null==e?void 0:null===(l=e.integerValue())||void 0===l?void 0:l.toNumber()),null==e||isNaN(e)||!isFinite(e))?"":t()(e,s)}}n.MESES_ATE_VENDER=(0,a.Z)(26),n.MESES_DO_ANO=(0,a.Z)(12)},2578:function(e,s,l){"use strict";var a,r;l.d(s,{A:function(){return a}}),(r=a||(a={})).CUB="CUB",r.HISTORICO_INTERNO="HISTORICO_INTERNO",r.ORCAMENTO="ORCAMENTO"},8136:function(){}},function(e){e.O(0,[218,990,394,947,156,971,69,744],function(){return e(e.s=5998)}),_N_E=e.O()}]);