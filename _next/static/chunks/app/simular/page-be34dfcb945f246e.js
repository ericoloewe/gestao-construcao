(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[535],{5998:function(e,s,a){Promise.resolve().then(a.bind(a,2475))},2475:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return N}});var l=a(7437);a(8136);var r=a(2265),n=a(2840);function o(e){let{onChange:s,isNumber:a,groupSymbolLeft:r,groupSymbolRight:o,isPercent:t,value:c,...i}=e,m="number"===e.type||a,d=m&&c?function(e,s){let{isPercent:a}=s;return isNaN(e.toNumber())?"":a?e.times(100).toNumber():e.toNumber()}(c,{isPercent:t}):c||"",u=(0,l.jsx)("input",{className:"form-control",onChange:function(e){let{value:a}=e.target;t?s((0,n.Z)(a).div(100)):m?s((0,n.Z)(a)):s(a)},value:d,...i});return r||o?(0,l.jsxs)("div",{className:"input-group mb-3",children:[r&&(0,l.jsx)("span",{className:"input-group-text",children:r}),u,o&&(0,l.jsx)("span",{className:"input-group-text",children:o})]}):u}var t=a(7907),c=a(3210);let i=(0,r.createContext)({setTitulo:()=>{},setArea:()=>{},setValor:()=>{},setItbi:()=>{},setEscrituraERegistro:()=>{},setIptu:()=>{},setValorTotal:()=>{},setValorEntrada:()=>{},setTaxaDeJuros:()=>{},setMesDeInicio:()=>{},setPrazo:()=>{},saveAll:()=>{}});function m(e){let s=(0,t.useSearchParams)(),a=(0,t.useRouter)(),[o,m]=(0,r.useState)(),[d,u]=(0,r.useState)(),[h,x]=(0,r.useState)(),[b,j]=(0,r.useState)(),[v,N]=(0,r.useState)(),[f,p]=(0,r.useState)(),[g,y]=(0,r.useState)(),[S,C]=(0,r.useState)(),[E,R]=(0,r.useState)(),[T,w]=(0,r.useState)(),{repository:D,isDbOk:Z}=(0,c.y$)();async function P(){let e=s.get("sim");if(null!=e){let s=await D.getSimulacao(e);console.log(s),m(s.titulo),u(s.area&&(0,n.Z)(s.area)),x(s.valor&&(0,n.Z)(s.valor)),j(s.itbi&&(0,n.Z)(s.itbi)),N(s.escrituraERegistro&&(0,n.Z)(s.escrituraERegistro)),p(s.iptu&&(0,n.Z)(s.iptu)),y(s.valorEntrada&&(0,n.Z)(s.valorEntrada)),C(s.taxaDeJuros&&(0,n.Z)(s.taxaDeJuros)),R(s.mesDeInicio&&(0,n.Z)(s.mesDeInicio)),w(s.prazo&&(0,n.Z)(s.prazo))}}async function V(){console.log("start save all");let e=s.get("sim"),l={titulo:o,area:d,valor:h,itbi:b,escrituraERegistro:v,iptu:f,valorEntrada:g,taxaDeJuros:S,mesDeInicio:E,prazo:T};Object.keys(l).forEach(e=>{var s,a;(null===(s=l[e])||void 0===s?void 0:s.toNumber)!=null&&(l[e]=null===(a=l[e])||void 0===a?void 0:a.toNumber())}),l.id=e;let r=await D.save(l);console.log(r),null==e&&a.push("/simular?sim=".concat(r.id)),console.log("end save all")}return(0,r.useEffect)(()=>{Z&&P()},[Z]),(0,l.jsx)(i.Provider,{value:{titulo:o,setTitulo:m,area:d,setArea:u,valor:h,setValor:x,itbi:b,setItbi:j,escrituraERegistro:v,setEscrituraERegistro:N,iptu:f,setIptu:p,valorEntrada:g,setValorEntrada:y,taxaDeJuros:S,setTaxaDeJuros:C,mesDeInicio:E,setMesDeInicio:R,prazo:T,setPrazo:w,saveAll:V},...e})}let d=()=>r.useContext(i);var u=a(1107);function h(e){let{onValorTotalTerrenoChange:s}=e,[a,n]=(0,r.useState)(),{area:t,setArea:c,valor:i,setValor:m,itbi:h,setItbi:x,escrituraERegistro:b,setEscrituraERegistro:j,iptu:v,setIptu:N}=d();return(0,r.useEffect)(()=>{i&&h&&b&&v&&n(u.B.valorTotal(i,h,b,v,u.B.MESES_ATE_VENDER))},[i,h,b,v]),(0,r.useEffect)(()=>{s(a)},[a]),(0,l.jsxs)("section",{className:"card valor-terreno mb-3",children:[(0,l.jsx)("div",{className:"card-header",children:"Terreno"}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"\xc1rea Do Terreno"}),(0,l.jsx)(o,{onChange:c,type:"number",groupSymbolRight:"m\xb2",value:t})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Valor De Aquisi\xe7\xe3o"}),(0,l.jsx)(o,{onChange:m,type:"number",min:"1",groupSymbolLeft:"R$",value:i}),(0,l.jsx)("div",{className:"form-text",children:u.B.extenso(i,{mode:"currency"})})]}),(0,l.jsxs)("div",{className:"mb-3 col-md-2",children:[(0,l.jsx)("label",{className:"form-label",children:"Pre\xe7o Do M\xb2"}),(0,l.jsxs)("h6",{children:["R$ ",t&&i&&i.div(t).toFormat(2)," / m\xb2"]})]})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Itbi"}),(0,l.jsx)(o,{onChange:x,type:"number",min:"1",step:"any",groupSymbolRight:"%",isPercent:!0,value:h})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Escritura E Registro"}),(0,l.jsx)(o,{onChange:j,type:"number",min:"1",step:"any",groupSymbolRight:"%",isPercent:!0,value:b})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Iptu"}),(0,l.jsx)(o,{onChange:N,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",groupSymbolRight:"ano",value:v})]})]}),(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsx)("label",{className:"form-label",children:"Custo Total Terreno"}),(0,l.jsxs)("h6",{children:["R$ ",null==a?void 0:a.toFormat(2)]}),(0,l.jsx)("div",{className:"form-text",children:u.B.extenso(a,{mode:"currency"})})]})]})}function x(e){let{valorTotalTerreno:s}=e,{valorEntrada:a,setValorEntrada:t,taxaDeJuros:c,setTaxaDeJuros:i,mesDeInicio:m,setMesDeInicio:h,prazo:x,setPrazo:b}=d(),[j,v]=(0,r.useState)(!1),N=s&&a?s.minus(a):null,f=x&&c&&N?function(e,s,a){var l,r;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(o||(o=0),t||(t=0),0===e)?(0,n.Z)(-(a+o)/s):(r=Math.pow(1+e,s),l=-e*(a*r+o)/(r-1),1===t&&(l/=1+e),(0,n.Z)(l))}(c.toNumber(),null==x?void 0:x.toNumber(),-(null==N?void 0:N.toNumber())):null,p=x&&f&&a?x.times(f).plus(a):null;return(0,l.jsxs)("section",{className:"card compra-terreno-parcelada mb-3 ".concat(j&&"show"),children:[(0,l.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-center",children:[(0,l.jsx)("span",{children:"Compra terreno parcelada"}),(0,l.jsx)("button",{className:"btn btn-secondary align-end",type:"button",onClick:e=>v(!j),children:j?"Remover":"Incluir"})]}),(0,l.jsxs)("div",{className:"collapse ".concat(j&&"show"),children:[(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Valor Da Entrada Sinal"}),(0,l.jsx)(o,{onChange:t,type:"number",groupSymbolLeft:"R$",value:a}),(0,l.jsx)("div",{className:"form-text",children:u.B.extenso(a,{mode:"currency"})})]}),(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Saldo"}),(0,l.jsxs)("h6",{children:["R$ ",null==N?void 0:N.toFormat(2)," / m\xb2"]})]})]}),(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Taxa De Juros"}),(0,l.jsx)(o,{onChange:i,type:"number",groupSymbolRight:"A.M.",isPercent:!0,value:c})]}),(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"M\xeas De In\xedcio"}),(0,l.jsx)(o,{onChange:h,type:"number",value:m})]}),(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Prazo em meses"}),(0,l.jsx)(o,{onChange:b,type:"number",value:x})]})]}),(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"M\xeas Da \xdaltima Parcela"}),(0,l.jsx)("h6",{children:m&&x&&m.plus(x).minus(1).toFormat(0)})]}),(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Valor da parcela"}),(0,l.jsxs)("h6",{children:["R$ ",null==f?void 0:f.toFormat(2)]}),(0,l.jsx)("div",{className:"form-text",children:u.B.extenso(f,{mode:"currency"})})]}),(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Valor Total Parcelado"}),(0,l.jsxs)("h6",{children:["R$ ",null==p?void 0:p.toFormat(2)]}),(0,l.jsx)("div",{className:"form-text",children:u.B.extenso(p,{mode:"currency"})})]})]})]})]})}var b=a(6125),j=a(8792);function v(){let[e,s]=(0,r.useState)(),{saveAll:a,titulo:n,setTitulo:t}=d();return(0,l.jsxs)("main",{className:"main container mt-3",children:[(0,l.jsx)("h1",{children:"Simular nova constru\xe7\xe3o"}),(0,l.jsxs)("article",{children:[(0,l.jsxs)("section",{className:"card valor-terreno mb-3",children:[(0,l.jsx)("div",{className:"card-header",children:"Terreno"}),(0,l.jsx)("div",{className:"mark-section",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Como deseja chamar sua simula\xe7\xe3o?"}),(0,l.jsx)(o,{onChange:t,type:"text",value:n,placeholder:"Casa popular 50m\xb2"})]})})})]}),(0,l.jsx)(h,{onValorTotalTerrenoChange:s}),(0,l.jsx)(x,{valorTotalTerreno:e}),(0,l.jsx)(j.default,{href:"/",className:"btn btn-secondary me-2",children:"Voltar ao inicio"}),(0,l.jsx)("button",{type:"button",className:"btn btn-primary",onClick:a,children:"Salvar simula\xe7\xe3o"})]})]})}function N(){return(0,l.jsx)(b.A,{children:(0,l.jsx)(m,{children:(0,l.jsx)(v,{})})})}},8136:function(){}},function(e){e.O(0,[218,990,583,28,971,69,744],function(){return e(e.s=5998)}),_N_E=e.O()}]);