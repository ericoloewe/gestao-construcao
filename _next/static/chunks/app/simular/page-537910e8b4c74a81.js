(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[535],{5998:function(e,s,a){Promise.resolve().then(a.bind(a,7030))},7030:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return f}});var l=a(7437);a(8136);var r=a(2265),o=a(2840);function n(e){let{onChange:s,isNumber:a,groupSymbolLeft:r,groupSymbolRight:n,isPercent:t,value:c,...i}=e,m="number"===e.type||a,d=m&&c?function(e,s){let{isPercent:a}=s;return null==e||isNaN(e.toNumber())?"":a?e.times(100).toNumber():e.toNumber()}(c,{isPercent:t}):c||"",u=(0,l.jsx)("input",{className:"form-control",onChange:function(e){let{value:a}=e.target;(s||function(){})(t?(0,o.Z)(a).div(100):m?(0,o.Z)(a):a)},value:d,...i});return r||n?(0,l.jsxs)("div",{className:"input-group mb-3",children:[r&&(0,l.jsx)("span",{className:"input-group-text",children:r}),u,n&&(0,l.jsx)("span",{className:"input-group-text",children:n})]}):u}var t=a(7907),c=a(3210);let i=(0,r.createContext)({setTitulo:()=>{},setArea:()=>{},setValor:()=>{},setItbi:()=>{},setEscrituraERegistro:()=>{},setIptu:()=>{},setValorTotal:()=>{},setValorEntrada:()=>{},setTaxaDeJuros:()=>{},setMesDeInicio:()=>{},setPrazo:()=>{},setAreaConstruidaTotal:()=>{},setAreaConstruidaEquivalente:()=>{},setCustoCUB:()=>{},setCustoHistoricoInterno:()=>{},setCustoOrcado:()=>{},setCustoProjetos:()=>{},setCustoTerraplanagem:()=>{},setCustoPaisagismo:()=>{},setOutrosCustos:()=>{},setMesDeInicioObra:()=>{},setDuracaoObra:()=>{},saveAll:()=>{}});function m(e){let s=(0,t.useSearchParams)(),a=(0,t.useRouter)(),[n,m]=(0,r.useState)(),[d,u]=(0,r.useState)(),[h,b]=(0,r.useState)(),[x,j]=(0,r.useState)(),[v,N]=(0,r.useState)(),[p,f]=(0,r.useState)(),[g,y]=(0,r.useState)(),[C,S]=(0,r.useState)(),[R,E]=(0,r.useState)(),[T,w]=(0,r.useState)(),[D,O]=(0,r.useState)(),[B,$]=(0,r.useState)(),[I,P]=(0,r.useState)(),[Z,A]=(0,r.useState)(),[M,L]=(0,r.useState)(),[V,F]=(0,r.useState)(),[_,k]=(0,r.useState)(),[U,z]=(0,r.useState)(),[H,J]=(0,r.useState)(),[q,G]=(0,r.useState)(),[K,Q]=(0,r.useState)(),{repository:W,isDbOk:X}=(0,c.y$)();async function Y(){let e=s.get("sim");if(null!=e){let s=await W.getSimulacao(e);console.log(s),m(s.titulo),u(s.area&&(0,o.Z)(s.area)),b(s.valor&&(0,o.Z)(s.valor)),j(s.itbi&&(0,o.Z)(s.itbi)),N(s.escrituraERegistro&&(0,o.Z)(s.escrituraERegistro)),f(s.iptu&&(0,o.Z)(s.iptu)),y(s.valorEntrada&&(0,o.Z)(s.valorEntrada)),S(s.taxaDeJuros&&(0,o.Z)(s.taxaDeJuros)),E(s.mesDeInicio&&(0,o.Z)(s.mesDeInicio)),w(s.prazo&&(0,o.Z)(s.prazo))}}async function ee(){console.log("start save all");let e=s.get("sim"),l={titulo:n,area:d,valor:h,itbi:x,escrituraERegistro:v,iptu:p,valorEntrada:g,taxaDeJuros:C,mesDeInicio:R,prazo:T};Object.keys(l).forEach(e=>{var s,a;(null===(s=l[e])||void 0===s?void 0:s.toNumber)!=null&&(l[e]=null===(a=l[e])||void 0===a?void 0:a.toNumber())}),l.id=e;let r=await W.save(l);console.log(r),null==e&&a.push("/simular?sim=".concat(r.id)),console.log("end save all")}return(0,r.useEffect)(()=>{X&&Y()},[X]),(0,l.jsx)(i.Provider,{value:{titulo:n,setTitulo:m,area:d,setArea:u,valor:h,setValor:b,itbi:x,setItbi:j,escrituraERegistro:v,setEscrituraERegistro:N,iptu:p,setIptu:f,valorEntrada:g,setValorEntrada:y,taxaDeJuros:C,setTaxaDeJuros:S,mesDeInicio:R,setMesDeInicio:E,prazo:T,setPrazo:w,areaConstruidaTotal:D,setAreaConstruidaTotal:O,areaConstruidaEquivalente:B,setAreaConstruidaEquivalente:$,custoCUB:I,setCustoCUB:P,custoHistoricoInterno:Z,setCustoHistoricoInterno:A,custoOrcado:M,setCustoOrcado:L,custoProjetos:V,setCustoProjetos:F,custoTerraplanagem:_,setCustoTerraplanagem:k,custoPaisagismo:U,setCustoPaisagismo:z,outrosCustos:H,setOutrosCustos:J,mesInicioObra:q,setMesDeInicioObra:G,duracaoObra:K,setDuracaoObra:Q,saveAll:ee},...e})}let d=()=>r.useContext(i);var u=a(1107);function h(e){let{onValorTotalTerrenoChange:s}=e,[a,o]=(0,r.useState)(),{area:t,setArea:c,valor:i,setValor:m,itbi:h,setItbi:b,escrituraERegistro:x,setEscrituraERegistro:j,iptu:v,setIptu:N}=d();return(0,r.useEffect)(()=>{i&&h&&x&&v&&o(u.B.valorTotal(i,h,x,v,u.B.MESES_ATE_VENDER))},[i,h,x,v]),(0,r.useEffect)(()=>{s(a)},[a]),(0,l.jsxs)("section",{className:"card valor-terreno mb-3",children:[(0,l.jsx)("div",{className:"card-header",children:"Terreno"}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"\xc1rea Do Terreno"}),(0,l.jsx)(n,{onChange:c,type:"number",groupSymbolRight:"m\xb2",value:t})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Valor De Aquisi\xe7\xe3o"}),(0,l.jsx)(n,{onChange:m,type:"number",min:"1",groupSymbolLeft:"R$",value:i}),(0,l.jsx)("div",{className:"form-text",children:u.B.extenso(i,{mode:"currency"})})]}),(0,l.jsxs)("div",{className:"mb-3 col-md-2",children:[(0,l.jsx)("label",{className:"form-label",children:"Pre\xe7o Do M\xb2"}),(0,l.jsxs)("h6",{children:["R$ ",t&&i&&i.div(t).toFormat(2)," / m\xb2"]})]})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Itbi"}),(0,l.jsx)(n,{onChange:b,type:"number",min:"1",step:"any",groupSymbolRight:"%",isPercent:!0,value:h})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Escritura E Registro"}),(0,l.jsx)(n,{onChange:j,type:"number",min:"1",step:"any",groupSymbolRight:"%",isPercent:!0,value:x})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Iptu"}),(0,l.jsx)(n,{onChange:N,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",groupSymbolRight:"ano",value:v})]})]}),(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsx)("label",{className:"form-label",children:"Custo Total Terreno"}),(0,l.jsxs)("h6",{children:["R$ ",null==a?void 0:a.toFormat(2)]}),(0,l.jsx)("div",{className:"form-text",children:u.B.extenso(a,{mode:"currency"})})]})]})}function b(e){let{valorTotalTerreno:s}=e,{valorEntrada:a,setValorEntrada:t,taxaDeJuros:c,setTaxaDeJuros:i,mesDeInicio:m,setMesDeInicio:h,prazo:b,setPrazo:x}=d(),[j,v]=(0,r.useState)(!1),N=s&&a?s.minus(a):null,p=b&&c&&N?function(e,s,a){var l,r;let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(n||(n=0),t||(t=0),0===e)?(0,o.Z)(-(a+n)/s):(r=Math.pow(1+e,s),l=-e*(a*r+n)/(r-1),1===t&&(l/=1+e),(0,o.Z)(l))}(c.toNumber(),null==b?void 0:b.toNumber(),-(null==N?void 0:N.toNumber())):null,f=b&&p&&a?b.times(p).plus(a):null;return(0,l.jsxs)("section",{className:"card compra-terreno-parcelada mb-3 ".concat(j&&"show"),children:[(0,l.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-center",children:[(0,l.jsx)("span",{children:"Compra terreno parcelada"}),(0,l.jsx)("button",{className:"btn btn-secondary align-end",type:"button",onClick:e=>v(!j),children:j?"Remover":"Incluir"})]}),(0,l.jsxs)("div",{className:"collapse ".concat(j&&"show"),children:[(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Valor Da Entrada Sinal"}),(0,l.jsx)(n,{onChange:t,type:"number",groupSymbolLeft:"R$",value:a}),(0,l.jsx)("div",{className:"form-text",children:u.B.extenso(a,{mode:"currency"})})]}),(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Saldo"}),(0,l.jsxs)("h6",{children:["R$ ",null==N?void 0:N.toFormat(2)," / m\xb2"]})]})]}),(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Taxa De Juros"}),(0,l.jsx)(n,{onChange:i,type:"number",groupSymbolRight:"A.M.",isPercent:!0,value:c})]}),(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"M\xeas De In\xedcio"}),(0,l.jsx)(n,{onChange:h,type:"number",value:m})]}),(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Prazo em meses"}),(0,l.jsx)(n,{onChange:x,type:"number",value:b})]})]}),(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"M\xeas Da \xdaltima Parcela"}),(0,l.jsx)("h6",{children:m&&b&&m.plus(b).minus(1).toFormat(0)})]}),(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Valor da parcela"}),(0,l.jsxs)("h6",{children:["R$ ",null==p?void 0:p.toFormat(2)]}),(0,l.jsx)("div",{className:"form-text",children:u.B.extenso(p,{mode:"currency"})})]}),(0,l.jsxs)("div",{className:"col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Valor Total Parcelado"}),(0,l.jsxs)("h6",{children:["R$ ",null==f?void 0:f.toFormat(2)]}),(0,l.jsx)("div",{className:"form-text",children:u.B.extenso(f,{mode:"currency"})})]})]})]})]})}var x=a(6125),j=a(8792),v=a(2578);function N(e){let{}=e,[s,a]=(0,r.useState)(),[o,t]=(0,r.useState)(),[c,i]=(0,r.useState)(),[m,h]=(0,r.useState)(),{areaConstruidaTotal:b,setAreaConstruidaTotal:x,areaConstruidaEquivalente:j,setAreaConstruidaEquivalente:N,custoCUB:p,setCustoCUB:f,custoHistoricoInterno:g,setCustoHistoricoInterno:y,custoOrcado:C,setCustoOrcado:S,custoProjetos:R,setCustoProjetos:E,custoTerraplanagem:T,setCustoTerraplanagem:w,custoPaisagismo:D,setCustoPaisagismo:O,outrosCustos:B,setOutrosCustos:$,mesInicioObra:I,setMesDeInicioObra:P,duracaoObra:Z,setDuracaoObra:A}=d();return(0,r.useEffect)(()=>{t(u.B.custoObra(j,p,g,C,m))},[j,p,g,C,m]),(0,r.useEffect)(()=>{i(u.B.custoTotalDeConstrucao(o,R,T,D,B))},[o,R,T,D,B]),(0,r.useEffect)(()=>{a(u.B.mesTerminoObra(I,Z))},[I,Z]),(0,l.jsxs)("section",{className:"card valor-terreno mb-3",children:[(0,l.jsx)("div",{className:"card-header",children:"Custos de Constru\xe7\xe3o"}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"\xc1rea Constru\xedda Total"}),(0,l.jsx)(n,{onChange:x,type:"number",groupSymbolRight:"m\xb2",value:b})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"\xc1rea Constru\xedda equivalente"}),(0,l.jsx)(n,{onChange:N,type:"number",groupSymbolRight:"m\xb2",value:j})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"CUB Refer\xeancia"}),(0,l.jsx)(n,{type:"text",value:"R1-B"})]})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Custo CUB"}),(0,l.jsx)(n,{onChange:f,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",groupSymbolRight:"m\xb2",value:p})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Custo Hist\xf3rico Interno"}),(0,l.jsx)(n,{onChange:y,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",groupSymbolRight:"m\xb2",value:g})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Custo Or\xe7ado"}),(0,l.jsx)(n,{onChange:S,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",groupSymbolRight:"m\xb2",value:C})]})]}),(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsxs)("div",{className:"mb-3 col-md-3",children:[(0,l.jsx)("label",{className:"form-label",children:"Custo Escolhido"}),(0,l.jsxs)("select",{className:"form-control",value:m,onChange:e=>h(e.target.value),children:[(0,l.jsx)("option",{value:v.A.CUB,children:"CUB"}),(0,l.jsx)("option",{value:v.A.HISTORICO_INTERNO,children:"Hist\xf3rico"}),(0,l.jsx)("option",{value:v.A.ORCAMENTO,children:"Or\xe7amento"})]})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Custo da obra"}),(0,l.jsxs)("h6",{children:["R$ ",null==o?void 0:o.toFormat(2)]}),(0,l.jsx)("div",{className:"form-text",children:u.B.extenso(o,{mode:"currency"})})]})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Custo Projetos"}),(0,l.jsx)(n,{onChange:E,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",value:R})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Custo Terraplanagem"}),(0,l.jsx)(n,{onChange:w,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",value:T})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Custo Paisagismo"}),(0,l.jsx)(n,{onChange:O,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",value:D})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Outros custos"}),(0,l.jsx)(n,{onChange:$,type:"number",min:"1",step:"any",groupSymbolLeft:"R$",value:B})]})]}),(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsx)("label",{className:"form-label",children:"Custo total de constru\xe7\xe3o"}),(0,l.jsxs)("h6",{children:["R$ ",null==c?void 0:c.toFormat(2)]}),(0,l.jsx)("div",{className:"form-text",children:u.B.extenso(c,{mode:"currency"})})]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"M\xeas In\xedcio Da Obra"}),(0,l.jsx)(n,{onChange:P,type:"number",min:"1",groupSymbolRight:"meses",value:I})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Dura\xe7\xe3o Da Obra"}),(0,l.jsx)(n,{onChange:A,type:"number",min:"1",groupSymbolRight:"meses",value:Z})]}),(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"M\xeas T\xe9rmino Da Obra"}),(0,l.jsxs)("h6",{children:[null==s?void 0:s.toFormat(0)," meses"]})]})]})]})}function p(){let[e,s]=(0,r.useState)(),{saveAll:a,titulo:o,setTitulo:t}=d();return(0,l.jsxs)("main",{className:"main container mt-3",children:[(0,l.jsx)("h1",{children:"Simular nova constru\xe7\xe3o"}),(0,l.jsxs)("article",{children:[(0,l.jsxs)("section",{className:"card valor-terreno mb-3",children:[(0,l.jsx)("div",{className:"card-header",children:"Terreno"}),(0,l.jsx)("div",{className:"mark-section",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsxs)("div",{className:"mb-3 col-md",children:[(0,l.jsx)("label",{className:"form-label",children:"Como deseja chamar sua simula\xe7\xe3o?"}),(0,l.jsx)(n,{onChange:t,type:"text",value:o,placeholder:"Casa popular 50m\xb2"})]})})})]}),(0,l.jsx)(h,{onValorTotalTerrenoChange:s}),(0,l.jsx)(b,{valorTotalTerreno:e}),(0,l.jsx)(N,{}),(0,l.jsx)(j.default,{href:"/",className:"btn btn-secondary me-2",children:"Voltar ao inicio"}),(0,l.jsx)("button",{type:"button",className:"btn btn-primary",onClick:a,children:"Salvar simula\xe7\xe3o"})]})]})}function f(){return(0,l.jsx)(x.A,{children:(0,l.jsx)(m,{children:(0,l.jsx)(p,{})})})}},8136:function(){}},function(e){e.O(0,[218,990,583,28,971,69,744],function(){return e(e.s=5998)}),_N_E=e.O()}]);